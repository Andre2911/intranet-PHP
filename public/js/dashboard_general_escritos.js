"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[632],{5620:(t,s,a)=>{a.r(s),a.d(s,{default:()=>i});const e={components:{highcharts:a(5130).Chart},props:["date_final","date_inicio"],data:function(){return{escritos:[],totalEscritos:0}},computed:{seriesEscritosPeriodo:function(){var t=this,s={data:[{name:"ATENDIDO",data:[],color:"rgba(12, 237, 12, 0.4)"},{name:"PENDIENTE",data:[],color:"rgba(237, 12, 12, 0.5)"},{name:"ANULADO",data:[],color:"rgba(38, 25, 12, 0.3)"}],periodos:[]},a=[];return null!=this.escritos[0]&&(a=this.escritos.reduce((function(t,s){var a=t.findIndex((function(t){return t.name===s.PERIODO}));return a>-1?"ATENDIDO"==s.DEN_ESTADO_ESCRITO?t[a].data[0]+=1*s.CONTADOR:"PENDIENTE"==s.DEN_ESTADO_ESCRITO?t[a].data[1]+=1*s.CONTADOR:t[a].data[2]+=1*s.CONTADOR:"ATENDIDO"==s.DEN_ESTADO_ESCRITO?t.push({name:s.PERIODO,data:[1*s.CONTADOR,0,0]}):"PENDIENTE"==s.DEN_ESTADO_ESCRITO?t.push({name:s.PERIODO,data:[0,1*s.CONTADOR,0]}):t.push({name:s.PERIODO,data:[0,0,1*s.CONTADOR]}),t}),[])),this.totalEscritos=0,s.periodos=[],a.forEach((function(a){s.periodos.push(a.name),s.data[0].data.push(a.data[0]),s.data[1].data.push(a.data[1]),s.data[2].data.push(a.data[2]),t.totalEscritos+=a.data[0],t.totalEscritos+=a.data[1],t.totalEscritos+=a.data[2]})),s},seriesEscritosInstancia:function(){var t={data:[{name:"ATENDIDO",data:[],color:"rgba(12, 237, 12, 0.4)"},{name:"PENDIENTE",data:[],color:"rgba(237, 12, 12, 0.5)"},{name:"ANULADO",data:[],color:"rgba(38, 25, 12, 0.3)"}],instancias:[]},s=[];return null!=this.escritos[0]&&(s=this.escritos.reduce((function(t,s){var a=t.findIndex((function(t){return t.name===s.DEN_INSTANCIA_SIJ}));return a>-1?"ATENDIDO"==s.DEN_ESTADO_ESCRITO?t[a].data[0]+=1*s.CONTADOR:"PENDIENTE"==s.DEN_ESTADO_ESCRITO?t[a].data[1]+=1*s.CONTADOR:t[a].data[2]+=1*s.CONTADOR:"ATENDIDO"==s.DEN_ESTADO_ESCRITO?t.push({name:s.DEN_INSTANCIA_SIJ,data:[1*s.CONTADOR,0,0]}):"PENDIENTE"==s.DEN_ESTADO_ESCRITO?t.push({name:s.DEN_INSTANCIA_SIJ,data:[0,1*s.CONTADOR,0]}):t.push({name:s.DEN_INSTANCIA_SIJ,data:[0,0,1*s.CONTADOR]}),t}),[])),s.sort((function(t,s){return s.data[0]-t.data[0]})),t.instancias=[],s.forEach((function(s){t.instancias.push(s.name),t.data[0].data.push(s.data[0]),t.data[1].data.push(s.data[1]),t.data[2].data.push(s.data[2])})),t},chartDataTime:function(){return{chart:{type:"column"},title:{text:"Escritos"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"},title:{text:"Estado"},categories:this.seriesEscritosPeriodo.periodos},yAxis:{min:0,title:{text:"Cantidad de Escritos"},labels:{overflow:"justify"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray",textOutline:"none"}}},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b> <br/>",pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.y:.0f} {point.stackTotal}%)<br/>',shared:!0},series:this.seriesEscritosPeriodo.data,plotOptions:{column:{dataLabels:{enabled:!0}},series:{cursor:"pointer",point:{events:{click:function(){alert("Category: "+this.category+", value: "+this.y)}}}}},colors:["#C62828","#6CF","#39F","#06C","#036","#000","#B38","#4DD0E","#00838F"]}},chartTopEscIns:function(){return{chart:{type:"bar",height:700},title:{text:"TOP 15 ESCRITOS POR INSTANCIA"},xAxis:{categories:this.seriesEscritosInstancia.instancias,max:this.seriesEscritosInstancia.instancias.length<15?this.seriesEscritosInstancia.instancias-1:15},yAxis:{min:0,title:{text:"Cantidad"},labels:{overflow:"justify"}},series:this.seriesEscritosInstancia.data,plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0},dataSorting:{enabled:!0}}},credits:{enabled:!1}}},chartTopEscInsPend:function(){return{chart:{type:"bar",height:700},title:{text:"PRODUCCIÓN POR INSTANCIA"},xAxis:{categories:this.seriesEscritosInstancia.instancias,max:this.seriesEscritosInstancia.instancias.length<15?this.seriesEscritosInstancia.instancias-1:15},yAxis:{min:0,title:{text:"Cantidad"},labels:{overflow:"justify"}},series:this.seriesEscritosInstancia.data,plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0},dataSorting:{enabled:!0}}},credits:{enabled:!1}}}},mounted:function(){this.getEscritos()},methods:{getEscritos:function(){var t=this,s=this.date_inicio,a=this.date_final,e="../consultasSIJ/reporteEscritos?f_ini="+s+"&f_fin="+a;this.showLoad("grey darken-2","Realizando consulta"),this.escritos=[],axios.get(e).then((function(e){0!=e.data.status?(t.escritos=e.data.data,t.nombre_archivo="Escritos__"+s+" - "+a+".xls",t.json_data=t.escritos,t.json_fields={Periodo:"PERIODO",Instancia:"DEN_INSTANCIA_SIJ","Estado escrito":"DEN_ESTADO_ESCRITO","Días Respuesta":"NUM_DIAS_RESPUESTA"},t.showSnack("success","Consulta de escritos obtenida")):(t.escritos=[],t.showSnack("warning",e.data.message)),t.showLoad("","",!1)})).catch((function(s){"Network Error"===s.message&&t.showSnack("warning","No se pudo conectar con el servicio de Base de Datos del SIJ"),500===s.response.status&&t.showSnack("warning","No se pudo conectar con el servicio de Base de Datos del SIJ"),401===s.response.status&&"Unauthenticated"==s.response.data.error?window.location="../login":403===s.response.status||419===s.response.status?window.location="../inicio":t.getResoluciones(),t.showLoad("","",!1)}))},showSnack:function(t,s){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.$emit("showSnack",t,s,a)},showLoad:function(t,s){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.$emit("showLoad",t,s,a)}}};const i=(0,a(1900).Z)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-row",{staticClass:"mt-2"},[a("v-col",{attrs:{cols:"12",md:"12"}},[null!=t.escritos[0]?[t.totalEscritos>0?a("v-alert",{staticClass:"pb-2",attrs:{value:!0,color:"success",outlined:""}},[t._v("\n                "+t._s(t.totalEscritos.toLocaleString("es-PE"))+" escritos obtenidos\n            ")]):t._e(),t._v(" "),null!=t.escritos[0]&&t.seriesEscritosPeriodo.periodos.length>0?[a("highcharts",{ref:"spline",attrs:{options:t.chartDataTime}})]:a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})]:[a("v-alert",{staticClass:"pb-2",attrs:{value:!0,color:"success",outlined:""}},[a("v-progress-linear",{attrs:{color:"light-blue",height:"10",indeterminate:"",striped:""}})],1)]],2),t._v(" "),a("v-col",[null!=t.escritos[0]?[a("highcharts",{ref:"spline",attrs:{options:t.chartTopEscIns}})]:t._e()],2)],1)}),[],!1,null,null,null).exports}}]);